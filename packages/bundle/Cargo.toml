[package]
name        = "smart-account-auth"
description = "Authentication library for smart accounts on various blockchains and their virtual machines"
edition     = { workspace = true }
authors     = { workspace = true }
version     = { workspace = true }
license     = { workspace = true }
readme      = { workspace = true }
repository  = { workspace = true }


[lib]
name        =  "smart_account_auth"
path        =  "src/lib.rs"
crate-type  =  ["cdylib", "rlib"]


[dependencies]
saa-auth                = { workspace = true }
saa-curves              = { workspace = true }
saa-schema              = { workspace = true }
saa-common              = { workspace = true }

scale                   = { workspace = true, optional = true }
scale-info              = { workspace = true, optional = true }
borsh                   = { workspace = true, optional = true }
schemars                = { workspace = true, optional = true }
serde                   = { workspace = true }

strum                   = { workspace = true }
strum_macros            = { workspace = true }
serde_json              = { workspace = true, optional = true }
enum_dispatch           = { workspace = true  }

cosmwasm-schema         = { workspace = true, optional = true }



[features]
default = [
    "std", 
    "ethereum", 
    "cosmos", 
    "ed25519",
    "passkeys",
    "replay",
    "session",
]
std = [
    "scale?/std",
    "scale-info?/std",
    "saa-auth/std",
]
session     = [
    "saa-common/session",
]

native = [
    "saa-auth/native",
]
solana = [
    "borsh/derive",
    "saa-auth/solana",
]
substrate = [
    "dep:scale",
    "dep:scale-info",
    "saa-auth/substrate",
]
cosmwasm = [
    "saa-auth/cosmwasm",
    "wasm",
    "std",
]
cosmwasm_1 = [
    "saa-auth/cosmwasm_1",
    "wasm",
]
secretwasm  = [
    "saa-common/secretwasm",
    "saa-auth/wasm",
    "saa-curves/wasm",
    "wasm",
]
injective = [
    "saa-auth/injective",
    "cosmwasm",
]
wasm   = ["dep:schemars", "dep:cosmwasm-schema"]
replay    = ["saa-common/replay"]
# Passkey credential 
passkeys    = []

# Blockchain specific authenticators
ethereum    = []
cosmos      = []

# Enable raw curve credentials without envelops
curves      = ["ed25519"]

# Set separately for Solana
ed25519     = []

# Enable the export of extra traits that the lib uses internally
traits      = []

# Enable the export of extra types that the lib uses internally
types       = ["saa-common/types"]

# Enable the export of inner utils that the lib uses
utils       = ["saa-auth/utils", "dep:serde_json"]
